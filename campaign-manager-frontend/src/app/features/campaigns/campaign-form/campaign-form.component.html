<c-container fluid>
  <c-row class="justify-content-center">
    <c-col xs="12" lg="8">
      <c-card>
        <c-card-header class="d-flex justify-content-between align-items-center">
          <strong>{{ pageTitle }}</strong>
          <button cButton color="light" variant="outline" (click)="onCancel()">
            <svg cIcon name="cilArrowLeft"></svg>
            Back to Campaigns
          </button>
        </c-card-header>
        <c-card-body>
          <!-- Loading State -->
          <div *ngIf="loading" class="text-center py-4">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading campaign...</span>
            </div>
            <p class="mt-2 text-muted">Loading campaign details...</p>
          </div>

          <!-- Form -->
          <form *ngIf="!loading" [formGroup]="campaignForm" (ngSubmit)="onSubmit()">
            <c-row>
              <!-- Campaign Name -->
              <c-col md="6" class="mb-3">
                <div class="form-group">
                  <label cLabel for="name" class="required">Campaign Name</label>
                  <input
                    cFormControl
                    type="text"
                    id="name"
                    formControlName="name"
                    placeholder="Enter campaign name"
                    [class.is-invalid]="isFieldInvalid('name')"
                  >
                  <div *ngIf="isFieldInvalid('name')" class="invalid-feedback">
                    {{ getFieldError('name') }}
                  </div>
                </div>
              </c-col>

              <!-- Status -->
              <c-col md="6" class="mb-3">
                <div class="form-group">
                  <label cLabel for="status" class="required">Status</label>
                  <select
                    cSelect
                    id="status"
                    formControlName="status"
                    [class.is-invalid]="isFieldInvalid('status')"
                  >
                    <option *ngFor="let option of statusOptions" [value]="option.value">
                      {{ option.label }}
                    </option>
                  </select>
                  <div *ngIf="isFieldInvalid('status')" class="invalid-feedback">
                    {{ getFieldError('status') }}
                  </div>
                </div>
              </c-col>

              <!-- Budget -->
              <c-col md="6" class="mb-3">
                <div class="form-group">
                  <label cLabel for="budget">Budget (USD)</label>
                  <input
                    cFormControl
                    type="number"
                    id="budget"
                    formControlName="budget"
                    placeholder="0.00"
                    min="0"
                    step="0.01"
                    [class.is-invalid]="isFieldInvalid('budget')"
                  >
                  <div *ngIf="isFieldInvalid('budget')" class="invalid-feedback">
                    {{ getFieldError('budget') }}
                  </div>
                </div>
              </c-col>

              <!-- Target Audience -->
              <c-col md="6" class="mb-3">
                <div class="form-group">
                  <label cLabel for="targetAudience">Target Audience</label>
                  <input
                    cFormControl
                    type="text"
                    id="targetAudience"
                    formControlName="targetAudience"
                    placeholder="e.g., Young adults 18-35, tech enthusiasts"
                    [class.is-invalid]="isFieldInvalid('targetAudience')"
                  >
                  <div *ngIf="isFieldInvalid('targetAudience')" class="invalid-feedback">
                    {{ getFieldError('targetAudience') }}
                  </div>
                </div>
              </c-col>

              <!-- Start Date -->
              <c-col md="6" class="mb-3">
                <div class="form-group">
                  <label cLabel for="startDate">Start Date</label>
                  <input
                    cFormControl
                    type="date"
                    id="startDate"
                    formControlName="startDate"
                    [class.is-invalid]="isFieldInvalid('startDate')"
                  >
                  <div *ngIf="isFieldInvalid('startDate')" class="invalid-feedback">
                    {{ getFieldError('startDate') }}
                  </div>
                </div>
              </c-col>

              <!-- End Date -->
              <c-col md="6" class="mb-3">
                <div class="form-group">
                  <label cLabel for="endDate">End Date</label>
                  <input
                    cFormControl
                    type="date"
                    id="endDate"
                    formControlName="endDate"
                    [class.is-invalid]="isFieldInvalid('endDate')"
                  >
                  <div *ngIf="isFieldInvalid('endDate')" class="invalid-feedback">
                    {{ getFieldError('endDate') }}
                  </div>
                </div>
              </c-col>

              <!-- Description -->
              <c-col xs="12" class="mb-3">
                <div class="form-group">
                  <label cLabel for="description">Description</label>
                  <textarea
                    cFormControl
                    id="description"
                    formControlName="description"
                    rows="4"
                    placeholder="Enter campaign description..."
                    [class.is-invalid]="isFieldInvalid('description')"
                  ></textarea>
                  <div *ngIf="isFieldInvalid('description')" class="invalid-feedback">
                    {{ getFieldError('description') }}
                  </div>
                  <small class="form-text text-muted">
                    Maximum 500 characters
                  </small>
                </div>
              </c-col>
            </c-row>

            <!-- Form Actions -->
            <hr>
            <div class="d-flex justify-content-between">
              <button type="button" cButton color="secondary" variant="outline" (click)="onCancel()">
                Cancel
              </button>
              <div class="d-flex gap-2">
                <button
                  type="submit"
                  cButton
                  color="primary"
                  [disabled]="campaignForm.invalid || submitting"
                >
                  <span *ngIf="submitting" class="spinner-border spinner-border-sm me-2" role="status"></span>
                  {{ submitButtonText }}
                </button>
              </div>
            </div>
          </form>
        </c-card-body>
      </c-card>
    </c-col>
  </c-row>
</c-container>